(function(t){function e(e){for(var a,s,i=e[0],l=e[1],u=e[2],d=0,p=[];d<i.length;d++)s=i[d],o[s]&&p.push(o[s][0]),o[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);c&&c(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,i=1;i<n.length;i++){var l=n[i];0!==o[l]&&(a=!1)}a&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},o={app:0},r=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/task-roistat/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var c=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"4fdc":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"content"},[n("Button",{nativeOn:{click:function(e){t.windowAdd=!0}}},[t._v("Add")]),n("Table",{attrs:{headers:!0,columns:t.columns,data:t.people,sortOrder:t.sortOrder,sortKey:t.sortKey},on:{sortby:t.sortBy,"click-to-row":t.toggleNestedTable},scopedSlots:t._u([t._l(t.openNests,function(e){return{key:e,fn:function(){return[n("Table",{staticClass:"app__table-nested",attrs:{columns:t.columns,data:t.makeDataToNestedTable(e)}})]}}})],!0)})],1),t.windowAdd?n("Window",{attrs:{title:"Add new man"},on:{close:function(e){t.windowAdd=!1}}},[n("AddForm",{attrs:{people:t.people},on:{submit:t.addMan}})],1):t._e()],1)},r=[],s=n("75fc"),i=(n("20d6"),n("7514"),n("55dd"),n("f499")),l=n.n(i),u=n("cebc"),c=n("e814"),d=n.n(c),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table"},[t.headers?n("thead",[t.columns?n("tr",{staticClass:"table__header-row"},t._l(t.columns,function(e){return n("th",{key:e,staticClass:"table__header-column",class:{active:t.sortKey==e},on:{click:function(n){return t.sortBy(e)}}},[t._v("\n        "+t._s(t._f("createColumnName")(e))+"\n        "),n("span",{staticClass:"table__pointer",class:t.getPointerModificator(e)})])}),0):t._e()]):t._e(),n("tbody",{staticClass:"table__body"},[t._l(t.data,function(e){return[n("tr",{key:e.id,staticClass:"table__row",on:{click:function(n){return t.$emit("click-to-row",e.id)}}},[t._l(t.columns,function(a){return n("td",{key:a,staticClass:"table__column"},[t._v("\n          "+t._s(e[a])+"\n        ")])}),t._t(e.id)],2)]})],2)])},f=[],m=(n("28a5"),n("6b54"),{name:"Table",props:["columns","data","sortOrder","sortKey","open-nests","headers"],methods:{getPointerModificator:function(t){return this.sortOrder<0&&this.sortKey===t?"table__pointer_up":this.sortOrder>0&&this.sortKey===t?"table__pointer_down":void 0},sortBy:function(t){var e=-1*this.sortOrder||1;t!==this.sortKey&&(e=1),this.$emit("sortby",{key:t,order:e})}},filters:{createColumnName:function(t){if(!t)return"";var e=t.toString();return e=e.charAt(0).toUpperCase()+e.slice(1),e=e.split("").map(function(t,e){return 0===e?t:v(t)?" "+t:t}),e.join("")}}});function v(t){return t.toUpperCase()===t}var _=m,h=(n("d143"),n("2877")),b=Object(h["a"])(_,p,f,!1,null,null,null),w=b.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"button"},[t._t("default")],2)},g=[],C={name:"Button"},N=C,O=(n("ef55"),Object(h["a"])(N,y,g,!1,null,null,null)),k=O.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"window"},[n("div",{staticClass:"window__body"},[n("div",{staticClass:"window__header"},[n("h5",{staticClass:"window__title"},[t._v("\n        "+t._s(t.title)+"\n      ")]),n("Close",{staticClass:"window__close",nativeOn:{click:function(e){return t.$emit("close")}}})],1),n("div",{staticClass:"window__content"},[t._t("default")],2)])])},j=[],P=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},I=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"close"},[n("span")])}],$={name:"Close"},S=$,T=(n("7f77"),Object(h["a"])(S,P,I,!1,null,null,null)),A=T.exports,B={name:"Window",components:{Close:A},props:["size","title"]},K=B,E=(n("e5bc"),Object(h["a"])(K,x,j,!1,null,null,null)),M=E.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){return e.preventDefault(),t.$emit("submit",t.data)}}},[n("label",[t._v("\n    First name:\n    "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.data.firstName,expression:"data.firstName"}],staticClass:"add-form__input",attrs:{type:"text",name:"firstName"},domProps:{value:t.data.firstName},on:{input:function(e){e.target.composing||t.$set(t.data,"firstName",e.target.value)}}})]),n("label",[t._v("\n    Last: name:\n    "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.data.lastName,expression:"data.lastName"}],staticClass:"add-form__input",attrs:{type:"text",name:"lastName"},domProps:{value:t.data.lastName},on:{input:function(e){e.target.composing||t.$set(t.data,"lastName",e.target.value)}}})]),n("label",[t._v("\n    Phone:\n    "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.data.phone,expression:"data.phone"}],staticClass:"add-form__input",attrs:{type:"text",name:"phone"},domProps:{value:t.data.phone},on:{input:function(e){e.target.composing||t.$set(t.data,"phone",e.target.value)}}})]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.data.parentId,expression:"data.parentId"}],staticClass:"add-form__select",attrs:{name:"parentId"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.data,"parentId",e.target.multiple?n:n[0])}}},[n("option",{attrs:{disabled:"",value:""}},[t._v("Select parent")]),t._l(t.people,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("\n      "+t._s(e.firstName+" "+e.lastName)+"\n    ")])})],2),n("input",{staticClass:"add-form__submit",attrs:{type:"submit",value:"Add"}})])},L=[],D={name:"AddForm",props:["people"],data:function(){return{data:{firstName:"",lastName:"",phone:"",parentId:""}}}},J=D,W=(n("71cd"),Object(h["a"])(J,F,L,!1,null,null,null)),U=W.exports,z={name:"App",components:{Table:w,Button:k,Window:M,AddForm:U},mounted:function(){var t=this;window.addEventListener("unload",function(){t.savePeopleToLocalStorage()});var e=window.localStorage.getItem("people"),n=window.localStorage.getItem("idCounter");null===e&&null===n||(this.people=JSON.parse(e),this.idCounter=d()(n))},data:function(){return{people:[],windowAdd:!1,columns:["firstName","lastName","phone"],idCounter:0,sortOrder:0,sortKey:"",openNests:[]}},methods:{addMan:function(t){this.people.push(Object(u["a"])({id:""+this.idCounter++},t)),this.windowAdd=!1},savePeopleToLocalStorage:function(){var t=l()(this.people);window.localStorage.setItem("people",t),window.localStorage.setItem("idCounter",this.idCounter)},sortBy:function(t){var e=t.order,n=t.key;this.sortOrder=t.order,this.sortKey=t.key,this.people.sort(function(t,a){return t[n]<a[n]?-1*e:t[n]>a[n]?1*e:0})},getById:function(t,e){var n=t.find(function(t){if(e===t.id)return!0});return n},getParentById:function(t){var e=this.getById(this.people,t),n=this.getById(this.people,e.parentId);if(n)return n},makeDataToNestedTable:function(t){var e=this.getParentById(t);return e?[e]:[]},toggleNestedTable:function(t){var e=this.openNests.findIndex(function(e){if(e===t)return!0});e>=0?this.openNests=[].concat(Object(s["a"])(this.openNests.slice(0,e)),Object(s["a"])(this.openNests.slice(e+1))):this.openNests.push(t)}}},q=z,G=(n("5c0b"),Object(h["a"])(q,o,r,!1,null,null,null)),H=G.exports;n("f48c");a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(H)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var a=n("5e27"),o=n.n(a);o.a},"5e27":function(t,e,n){},"6d32":function(t,e,n){},"71cd":function(t,e,n){"use strict";var a=n("4fdc"),o=n.n(a);o.a},"7f77":function(t,e,n){"use strict";var a=n("cb19"),o=n.n(a);o.a},"858e":function(t,e,n){},c76d:function(t,e,n){},cb19:function(t,e,n){},d143:function(t,e,n){"use strict";var a=n("858e"),o=n.n(a);o.a},e5bc:function(t,e,n){"use strict";var a=n("6d32"),o=n.n(a);o.a},ef55:function(t,e,n){"use strict";var a=n("c76d"),o=n.n(a);o.a},f48c:function(t,e,n){}});
//# sourceMappingURL=app.a801b651.js.map