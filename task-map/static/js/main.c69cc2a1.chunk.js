(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(48)},28:function(e,t,n){},30:function(e,t,n){},38:function(e,t,n){},40:function(e,t,n){},42:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(12),i=n.n(r),c=(n(28),n(2)),s=n(3),d=n(6),l=n(4),u=n(5),h=(n(30),n(1)),p=n(16),b=(n(38),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(l.a)(t).call(this,e))).handleClose=n.handleClose.bind(Object(h.a)(Object(h.a)(n))),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleClose",value:function(e){this.props.onClose(this.props.id)}},{key:"render",value:function(){return o.a.createElement("li",{className:"Point"},o.a.createElement("p",{className:"Point__Text"},this.props.text),o.a.createElement("button",{onClick:this.handleClose,className:"Point__Close"},o.a.createElement("span",null)),o.a.createElement("p",{className:"Point__Description"},this.props.description))}}]),t}(a.Component)),m=(n(40),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(l.a)(t).call(this,e))).state={input:""},n.handleChange=n.handleChange.bind(Object(h.a)(Object(h.a)(n))),n.handleAdd=n.handleAdd.bind(Object(h.a)(Object(h.a)(n))),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState({input:e.target.value})}},{key:"handleAdd",value:function(){this.props.onAdd(this.state.input)}},{key:"render",value:function(){var e=this;return o.a.createElement("form",{className:"Add",onSubmit:function(t){t.preventDefault(),e.handleAdd()}},o.a.createElement("input",{className:"Add__Input",onChange:this.handleChange,type:"text",value:this.state.input}),o.a.createElement("input",{type:"submit",className:"Add__Button",value:"Add"}))}}]),t}(a.Component)),O=(n(42),function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("ul",{className:"List"},this.props.children)}}]),t}(a.Component)),f=n(11),j=0,v=Object(p.SortableElement)(b),E=Object(p.SortableContainer)(O),g=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(l.a)(t).call(this,e))).handleSortEnd=n.handleSortEnd.bind(Object(h.a)(Object(h.a)(n))),n.handleRemove=n.handleRemove.bind(Object(h.a)(Object(h.a)(n))),n.handleAddPoint=n.handleAddPoint.bind(Object(h.a)(Object(h.a)(n))),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleSortEnd",value:function(e){var t=e.oldIndex,n=e.newIndex;this.props.replacePoint({oldIndex:t,newIndex:n})}},{key:"handleRemove",value:function(e){this.props.removePoint(e)}},{key:"handleAddPoint",value:function(e){""!==e&&this.props.addPoint({name:e,coordinates:this.props.center})}},{key:"render",value:function(){var e=this,t=this.props.points.map(function(t,n){return o.a.createElement(v,{id:t.id,index:n,key:t.id,onClose:e.handleRemove,text:t.name,description:t.address})});return o.a.createElement(a.Fragment,null,o.a.createElement(m,{onAdd:this.handleAddPoint}),o.a.createElement(E,{distance:1,helperClass:"Point_focus",onSortEnd:this.handleSortEnd},t))}}]),t}(a.Component),C=Object(f.b)(function(e,t){return{points:e.points,center:e.center}},{addPoint:function(e){var t=e.name,n=e.coordinates,a=e.address;return{type:"ADD_POINT",id:j+++"",name:t,address:a||"",coordinates:n}},removePoint:function(e){return{type:"REMOVE_POINT",id:e}},replacePoint:function(e){return{type:"REPLACE_POINT",oldIndex:e.oldIndex,newIndex:e.newIndex}}})(g),y=n(13),P=(n(46),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(l.a)(t).call(this,e))).handleChangeCenter=n.handleChangeCenter.bind(Object(h.a)(Object(h.a)(n))),n.handleMovePoints=n.handleMovePoints.bind(Object(h.a)(Object(h.a)(n))),n.loadAddress=n.loadAddress.bind(Object(h.a)(Object(h.a)(n))),n.state={ymaps:null},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChangeCenter",value:function(e){this.props.changeCenter(e.get("newCenter"))}},{key:"handleMovePoints",value:function(e,t){this.props.changePoint({coordinates:e.originalEvent.target.geometry._coordinates,id:t})}},{key:"loadAddress",value:function(e,t){var n=this;this.state.ymaps.geocode(e).then(function(e){n.props.changePoint({id:t,address:e.geoObjects.get(0).properties.getAll().name})})}},{key:"render",value:function(){var e=this,t=this.props.points.map(function(t){t.address||e.loadAddress(t.coordinates,t.id);var n='<h5 style = "margin: 3px; font-weight: 400; font-size: 15px;">'+t.name+'</h5><p style = "margin: 3px">'+(t.address||"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...")+"</p>";return o.a.createElement(y.Placemark,{key:t.id,options:{draggable:!0},modules:["geoObject.addon.balloon"],geometry:t.coordinates,onGeometryChange:function(n){e.handleMovePoints(n,t.id)},onDragEnd:function(){e.loadAddress(t.coordinates,t.id)},properties:{balloonContent:n}})}),n={center:this.props.center,zoom:9},a=this.props.points.map(function(e){return e.coordinates});return o.a.createElement(y.YMaps,{query:{apikey:"c2f7ee60-233c-488b-ad4d-d1576e874f91"}},o.a.createElement(y.Map,{width:"100%",height:"100%",state:n,modules:["geocode"],onBoundsChange:this.handleChangeCenter,onLoad:function(t){return e.setState({ymaps:t})}},t,o.a.createElement(y.GeoObject,{geometry:{type:"LineString",coordinates:a},options:{strokeColor:"#bfedff",strokeWidth:3}})))}}]),t}(a.Component)),A=Object(f.b)(function(e,t){return{points:e.points,center:e.center}},{changeCenter:function(e){return{type:"CHANGE_CENTER",coordinates:e}},changePoint:function(e){var t=e.id,n=e.name,a=e.coordinates;return{type:"CHANGE_POINT",id:t,name:n,address:e.address,coordinates:a}}})(P),k=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"left"},o.a.createElement(C,null)),o.a.createElement("div",{className:"right"},o.a.createElement(A,null)))}}]),t}(a.Component),N=n(10),w=n(22),I=n(7),x=function(e,t){for(var n,a=0;a<t.length;a++)t[a].id===e&&(n=a);return n},_=function(e,t){var n=[].concat(Object(I.a)(e.slice(0,t.oldIndex)),Object(I.a)(e.slice(t.oldIndex+1)));return n=[].concat(Object(I.a)(n.slice(0,t.newIndex)),[e[t.oldIndex]],Object(I.a)(n.slice(t.newIndex)))},S=function(e,t){var n=x(t.id,e),a=Object(w.a)({},e[n]);return a.coordinates=t.coordinates||a.coordinates,a.name=t.name||a.name,a.address=t.address||(""===t.address?"":a.address),[].concat(Object(I.a)(e.slice(0,n)),[a],Object(I.a)(e.slice(n+1)))},T={points:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POINT":return[].concat(Object(I.a)(e),[{id:t.id,name:t.name,address:t.address,coordinates:t.coordinates}]);case"REMOVE_POINT":var n=x(t.id,e);return[].concat(Object(I.a)(e.slice(0,n)),Object(I.a)(e.slice(n+1)));case"REPLACE_POINT":return _(e,t);case"CHANGE_POINT":return S(e,t);default:return e}},center:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[55.75,37.57],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_CENTER":return Object(I.a)(t.coordinates);default:return e}}},R=Object(N.b)(T),M=Object(N.c)(R);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(f.a,{store:M},o.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,2,1]]]);
//# sourceMappingURL=main.c69cc2a1.chunk.js.map